# Search Engine Project

## Описание
Полнофункциональная поисковая система, состоящая из двух основных компонентов:

- **Веб-краулер (Spider)** — сканирует и индексирует веб-страницы  
- **HTTP-сервер** — обрабатывает поисковые запросы и возвращает результаты

Система хранит данные в PostgreSQL и поддерживает обработку запросов на **английском** и **русском** языках.

## Содержание
- [Функционал](#функционал)
- [Архитектура](#архитектура)
- [Технологии](#технологии)
- [Запуск проекта](#запуск-проекта)
- [Конфигурация](#конфигурация)
- [Ограничения](#ограничения)
- [Лицензия](#лицензия)

## Функционал
### Веб-краулер (Spider)
- Многопоточное сканирование с пулом потоков  
- Поддержка HTTP/HTTPS  
- Обработка редиректов (до 5 уровней)  
- Извлечение и нормализация ссылок  
- Настраиваемая глубина сканирования  
- Интеллектуальный парсинг HTML с 3 уровнями:
  - `LIGHT`: только мета-теги
  - `MIDDLE`: мета-теги + заголовки
  - `DEEP`: мета-теги + заголовки + параграфы  
- Взвешенная индексация контента:
  - Ключевые слова: ×4  
  - Заголовки: ×3  
  - Описание: ×2  
  - Основной текст: ×1  
- Определение языка страницы  
- Защита от дублирования URL  

### HTTP-сервер
- Асинхронный сервер на **Boost.Beast**  
- Поддержка GET/POST  
- Кодировка UTF-8  
- Веб-интерфейс для поиска  
- Вывод топ-10 релевантных результатов  
- Поддержка кириллицы  
- Ранжирование по релевантности  

## Архитектура
```text
[Пользователь]
    │
    ▼
[HTTP Сервер] ←→ [PostgreSQL]
    ▲               ▲
    │               │
[Веб-краулер] ──────┘
```

## Технологии
Технологии

- **Язык**: C++17  
- **Библиотеки**:
  - Boost (Beast, Asio, Locale)
  - libpqxx (PostgreSQL клиент)
  - OpenSSL  
- **Сборка**: CMake 3.20+  
- **БД**: PostgreSQL 13+

## Запуск проекта

### Требования

| Компонент   | Минимальная версия |
|-------------|---------------------|
| Компилятор  | GCC 10 / Clang 12   |
| PostgreSQL  | 13                  |
| Boost       | 1.74                |
| OpenSSL     | 1.1.1               |
| CMake       | 3.20                |

### Настройка БД

```sql
CREATE DATABASE search_engine;
CREATE USER search_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE search_engine TO search_user;
```

> Таблицы будут созданы автоматически при первом запуске.

### Сборка проекта

```bash
# Клонирование репозитория
git clone https://github.com/yourusername/search-engine.git
cd search-engine

# Сборка краулера
cd spider
mkdir build && cd build
cmake .. && make

# Сборка сервера
cd ../../server
mkdir build && cd build
cmake .. && make
```

### Конфигурация

Создайте файл `Properties.ini` в корне проекта:

```ini
[data_base]
host=localhost
port=5432
dbname=search_engine
user=search_user
password=your_password

[spider]
start_page=https://example.com
depth=2
search_strength=1  ; 0-LIGHT, 1-MIDDLE, 2-DEEP

[http_server]
server_port=8080
```

### Запуск компонентов

```bash
# Запуск краулера
cd spider/build
./SpiderApp

# Запуск сервера
cd ../../server/build
./HttpServerApp
```

> Откройте браузер: http://localhost:8080

## Конфигурация
Конфигурация

### Секция `[data_base]`

| Параметр  | Описание                 | Пример           |
|-----------|--------------------------|------------------|
| host      | Хост БД                  | localhost        |
| port      | Порт БД                  | 5432             |
| dbname    | Имя базы данных          | search_engine    |
| user      | Пользователь БД          | search_user      |
| password  | Пароль пользователя БД   | secure_pass      |

### Секция `[spider]`

| Параметр        | Описание                        | Допустимые значения      |
|-----------------|----------------------------------|---------------------------|
| start_page      | Начальный URL для сканирования   | URL                       |
| depth           | Глубина сканирования             | 0–5                       |
| search_strength | Уровень анализа контента         | 0 (LIGHT), 1, 2 (DEEP)    |

### Секция `[http_server]`

| Параметр     | Описание              | Пример значения |
|--------------|-----------------------|------------------|
| server_port  | Порт HTTP-сервера     | 8080             |

## Ограничения
Ограничения

- Нет обработки JavaScript и динамического контента  
- Максимум 5 редиректов  
- Нет морфологического анализа  
- Ограниченная поддержка сложных HTML  
- Нет параллельной работы краулера и сервера  
- Нет HTTPS на сервере  
- Нет кэширования запросов  

## Лицензия
Лицензия

**MIT License**

```text
Copyright (c) 2025 Lygush

Разрешается бесплатное использование, копирование, модификация и распространение
программного обеспечения для любых целей без ограничений, при условии сохранения
уведомления об авторских правах во всех копиях.
```
